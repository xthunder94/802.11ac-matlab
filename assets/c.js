function draw(){ctx.clearRect(0,0,W,H);for(var t=0;mp>t;t++){var n=particles[t];ctx.beginPath(),ctx.lineWidth=n.r/2,ctx.strokeStyle=n.color,ctx.moveTo(n.x+n.tilt+n.r/4,n.y),ctx.lineTo(n.x+n.tilt,n.y+n.tilt+n.r/4),ctx.stroke()}update()}function draw2(){ctx.clearRect(0,0,W,H);for(var t=0;mp>t;t++){var n=particles[t];ctx.beginPath(),ctx.lineWidth=n.r/2,ctx.strokeStyle=n.color,ctx.moveTo(n.x+n.tilt+n.r/4,n.y),ctx.lineTo(n.x+n.tilt,n.y+n.tilt+n.r/4),ctx.stroke()}update2()}function randomFromTo(t,n){return Math.floor(Math.random()*(n-t+1)+t)}function update(){angle+=.01,tiltAngle+=.1,TiltChangeCountdown--;for(var t=0;mp>t;t++){var n=particles[t];n.tiltAngle+=n.tiltAngleIncremental,n.y+=(Math.cos(angle+n.d)+1+n.r/2)/2,n.x+=Math.sin(angle),n.tilt=15*Math.sin(n.tiltAngle-t/3),(n.x>W+5||n.x<-5||n.y>H)&&(particles[t]=t%5>0||t%2==0?{x:Math.random()*W,y:-10,r:n.r,d:n.d,color:n.color,tilt:Math.floor(10*Math.random())-10,tiltAngle:n.tiltAngle,tiltAngleIncremental:n.tiltAngleIncremental}:Math.sin(angle)>0?{x:-5,y:Math.random()*H,r:n.r,d:n.d,color:n.color,tilt:Math.floor(10*Math.random())-10,tiltAngleIncremental:n.tiltAngleIncremental}:{x:W+5,y:Math.random()*H,r:n.r,d:n.d,color:n.color,tilt:Math.floor(10*Math.random())-10,tiltAngleIncremental:n.tiltAngleIncremental})}}function update2(){angle+=.01,tiltAngle+=.1,TiltChangeCountdown--;for(var t=0;mp>t;t++){var n=particles[t];n.tiltAngle+=n.tiltAngleIncremental,n.y+=(Math.cos(angle+n.d)+1+n.r/2)/2,n.x+=Math.sin(angle),n.tilt=15*Math.sin(n.tiltAngle-t/3)}}function StartConfetti(){timer=!0,particles=[];for(var t=0;mp>t;t++)particles.push({x:1*W,y:1*H,r:randomFromTo(5,30),d:Math.random()*mp+10,color:"rgba("+Math.floor(255*Math.random())+", "+Math.floor(255*Math.random())+", "+Math.floor(255*Math.random())+", 0.7)",tilt:Math.floor(10*Math.random())-10,tiltAngleIncremental:.07*Math.random()+.05,tiltAngle:0});W=window.innerWidth,H=window.innerHeight,canvas.width=W,canvas.height=H,clearTimeout(confettiHandler),confettiHandler=setInterval(draw,15)}function StopConfetti(){timer=!1,clearTimeout(confettiHandler),confettiHandler=setInterval(draw2,15)}var timer=!1,canvas,ctx,confettiHandler,W,H,mp=150,particles=[],TiltChangeCountdown=5,angle=0,tiltAngle=0;$(window).resize(function(){canvas=document.getElementById("canvas"),W=window.innerWidth,H=window.innerHeight,canvas.width=W,canvas.height=H}),$(document).ready(function(){canvas=document.getElementById("canvas"),console.log("All hail Keensus"),ctx=canvas.getContext("2d"),W=window.innerWidth,H=window.innerHeight,canvas.width=W,canvas.height=H,StartConfetti()});